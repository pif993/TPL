<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>TPL · Advanced & Security</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/admin-lte@4.0.0-beta3/dist/css/adminlte.min.css" rel="stylesheet">
  <link href="/styles.css" rel="stylesheet">
</head>
<body class="layout-fixed sidebar-expand-lg bg-body-tertiary sb-collapsed">
  <div class="app-wrapper">

    <!-- Top Navbar -->
    <nav class="app-header navbar navbar-expand bg-body">
      <div class="container-fluid">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" id="sidebarToggle" href="#" role="button" aria-label="Toggle sidebar"><i class="bi bi-list"></i></a>
          </li>
        </ul>
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="/dashboard"><i class="bi bi-speedometer2 me-1"></i> Dashboard</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-danger" href="#" onclick="TPL.logout();return false" aria-label="Logout" title="Logout"><i class="bi bi-box-arrow-right"></i></a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Sidebar (rendered by sidebar.js) -->
    <div id="sidebarMount"></div>

    <!-- Main Content -->
    <main class="app-main">
      <div class="app-content-header">
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-6"><h3 class="mb-0"><i class="bi bi-gear me-2"></i>Advanced & Security</h3></div>
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-end">
                <li class="breadcrumb-item"><a href="/dashboard">Dashboard</a></li>
                <li class="breadcrumb-item active">Advanced</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
      <div class="app-content">
        <div class="container-fluid">

          <!-- Hero -->
          <div class="ov-hero">
            <div class="ov-hero-left">
              <h2 class="ov-hero-title"><i class="bi bi-terminal me-2"></i>Strumenti Avanzati</h2>
              <p class="ov-hero-sub">Documentazione API, monitoraggio e risorse per sviluppatori</p>
            </div>
            <div class="ov-hero-right">
              <span class="ov-role-chip"><i class="bi bi-code-slash"></i> Developer Tools</span>
            </div>
          </div>

          <!-- Action Grid -->
          <div class="row g-3 mb-4">
            <div class="col-12 col-lg-6">
              <div class="ov-panel h-100">
                <div class="ov-panel-head"><span><i class="bi bi-file-earmark-code"></i> Documentazione API</span></div>
                <div class="ov-panel-body">
                  <p class="adv-desc">Documentazione interattiva degli endpoint API, generata automaticamente da OpenAPI.</p>
                  <div class="ov-actions ov-actions--2col">
                    <a class="ov-action-btn" href="/api/docs" target="_blank" rel="noopener">
                      <i class="bi bi-filetype-json"></i> Swagger UI
                    </a>
                    <a class="ov-action-btn" href="/api/openapi.json" target="_blank" rel="noopener">
                      <i class="bi bi-braces"></i> OpenAPI JSON
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-6">
              <div class="ov-panel h-100">
                <div class="ov-panel-head"><span><i class="bi bi-activity"></i> Osservabilità</span></div>
                <div class="ov-panel-body">
                  <p class="adv-desc">Health checks e status per il monitoraggio e debugging operativo.</p>
                  <div class="ov-actions ov-actions--2col">
                    <a class="ov-action-btn" href="/api/health" target="_blank" rel="noopener">
                      <i class="bi bi-heart-pulse"></i> Health Check
                    </a>
                    <a class="ov-action-btn" href="/api/status" target="_blank" rel="noopener">
                      <i class="bi bi-graph-up"></i> Stato Piattaforma
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Links -->
          <div class="ov-panel">
            <div class="ov-panel-head"><span><i class="bi bi-link-45deg"></i> Link Rapidi</span></div>
            <div class="ov-panel-body">
              <div class="ov-actions">
                <a class="ov-action-btn" href="/dashboard"><i class="bi bi-speedometer2"></i> Dashboard</a>
                <a class="ov-action-btn" href="/api/docs" target="_blank" rel="noopener"><i class="bi bi-book"></i> API Docs</a>
                <a class="ov-action-btn" href="/api/health" target="_blank" rel="noopener"><i class="bi bi-heart-pulse"></i> Health</a>
                <a class="ov-action-btn" href="/api/status" target="_blank" rel="noopener"><i class="bi bi-info-circle"></i> Status</a>
              </div>
            </div>
          </div>

          <!-- Engine Status & System Info -->
          <div class="row g-3 mb-4">
            <div class="col-12 col-lg-6">
              <div class="ov-panel h-100">
                <div class="ov-panel-head"><span><i class="bi bi-cpu"></i> Stato Engine</span>
                  <button class="btn btn-sm btn-outline-primary" onclick="loadEngineStatus()" aria-label="Ricarica stato engine"><i class="bi bi-arrow-clockwise"></i></button>
                </div>
                <div class="ov-panel-body" id="engineStatusContainer">
                  <div class="ov-placeholder"><div class="ov-placeholder-pulse"></div></div>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-6">
              <div class="ov-panel h-100">
                <div class="ov-panel-head"><span><i class="bi bi-shield-check"></i> Sicurezza</span>
                  <button class="btn btn-sm btn-outline-primary" onclick="loadSecurityStatus()" aria-label="Ricarica stato sicurezza"><i class="bi bi-arrow-clockwise"></i></button>
                </div>
                <div class="ov-panel-body" id="securityStatusContainer">
                  <div class="ov-placeholder"><div class="ov-placeholder-pulse"></div></div>
                </div>
              </div>
            </div>
          </div>

          <!-- System Info -->
          <div class="ov-panel mb-4">
            <div class="ov-panel-head"><span><i class="bi bi-info-circle"></i> Informazioni Sistema</span>
              <button class="btn btn-sm btn-outline-primary" onclick="loadSystemInfo()" aria-label="Ricarica informazioni sistema"><i class="bi bi-arrow-clockwise"></i></button>
            </div>
            <div class="ov-panel-body" id="systemInfoContainer">
              <div class="ov-placeholder"><div class="ov-placeholder-pulse"></div></div>
            </div>
          </div>

          <!-- Audit Log (last entries) -->
          <div class="ov-panel mb-4">
            <div class="ov-panel-head"><span><i class="bi bi-journal-text"></i> Ultime Operazioni Audit</span>
              <button class="btn btn-sm btn-outline-primary" onclick="loadAuditLog()" aria-label="Ricarica log audit"><i class="bi bi-arrow-clockwise"></i></button>
            </div>
            <div class="ov-panel-body" id="auditLogContainer">
              <div class="ov-placeholder"><div class="ov-placeholder-pulse"></div></div>
            </div>
          </div>

        </div>
      </div>
    </main>

    <footer class="app-footer">
      <div class="float-end d-none d-sm-inline">v3.0</div>
      <strong>&copy; TPL Platform</strong>
    </footer>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/app.js"></script>
  <script src="/sidebar.js"></script>
  <script src="/advanced.js"></script>
</body>
</html>
