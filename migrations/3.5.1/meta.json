{
  "version": "3.5.1",
  "codename": "Horizon",
  "description": "Security fixes, audit chain thread-safety, migration system bootstrap",
  "requires_min": "2.0.0",
  "has_data_migration": true,
  "reversible": true,
  "phases": ["pre", "post"],
  "author": "system",
  "created_at": "2026-02-28T12:00:00Z",
  "files_changed": [
    "apps/api/app/main.py",
    "apps/api/app/auth_impl.py",
    "apps/api/app/_auth_local.py",
    "apps/api/requirements.txt",
    "infra/web/diagnostics.js",
    "infra/web/diagnostics.html",
    "infra/web/app.js",
    "infra/web/landing.js",
    "infra/web/nginx.conf",
    "scripts/version.sh",
    "scripts/release.sh",
    "scripts/tpl-modules",
    "scripts/ota_update.sh",
    "migrations/registry.json",
    "migrations/run_migrations.sh"
  ],
  "changelog": [
    "CRITICAL: audit chain race condition fixed (threading.Lock)",
    "CRITICAL: diagnostics.js SyntaxError fixed (missing brace)",
    "CRITICAL: HMAC key permissions 644→600 (tpl-modules)",
    "HIGH: flock concurrency guard on OTA apply",
    "HIGH: token refresh timing fix for short TTL",
    "HIGH: inline onclick removed (CSP compliance)",
    "MEDIUM: version.sh argjson→arg fix, greedy sed fix",
    "MEDIUM: release.sh reads version from VERSION.json",
    "MEDIUM: JSON injection fix in tpl-modules _log_event",
    "MEDIUM: nginx cache immutable→must-revalidate",
    "LOW: auth_impl dead code removal",
    "LOW: _auth_local.py exception re-raise fix",
    "LOW: landing.js loginBusy reset on success",
    "LOW: pydantic added to requirements.txt",
    "NEW: Migration system for cumulative OTA patching"
  ]
}
